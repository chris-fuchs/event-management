
<mat-accordion  class="example-headers-align" multi *ngIf="isAdmin || isMod">

  <mat-expansion-panel *ngIf="isAdmin">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Moderator
      </mat-panel-title>
      <mat-panel-description>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyModFilter($event)" placeholder="Ex. Mia" #input>
    </mat-form-field>

      <table mat-table [dataSource]="DataSourceMod" class="mat-elevation-z8">

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

        <ng-container matColumnDef="username">
          <mat-header-cell *matHeaderCellDef> Username </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="email">
          <mat-header-cell mat-header-cell *matHeaderCellDef> E-Mail </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.email}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="roles">
          <mat-header-cell mat-header-cell *matHeaderCellDef> Roles </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.roles}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
          <mat-header-cell  *matHeaderCellDef > Actions </mat-header-cell>
          <mat-cell *matCellDef="let user" >
            <button (click)="demoteModToUser(user.id)">Demote to User</button>
            <button (click)="deleteUser(user.id)">Delete</button>
          </mat-cell>
        </ng-container>
      </table>
      <mat-paginator
          #paginatorMod="matPaginator"
          [pageSizeOptions]="[5,10,20]"
          showFirstLastButtons
          aria-label="Select page">
      </mat-paginator>
  </mat-expansion-panel>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Organizer
      </mat-panel-title>
      <mat-panel-description>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyOrgFilter($event)" placeholder="Ex. Mia" #input>
    </mat-form-field>

      <table mat-table [dataSource]="DataSourceOrg" class="mat-elevation-z8">

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

        <ng-container matColumnDef="username">
          <mat-header-cell *matHeaderCellDef> Username </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="email">
          <mat-header-cell mat-header-cell *matHeaderCellDef> E-Mail </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.email}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="roles">
          <mat-header-cell mat-header-cell *matHeaderCellDef> Roles </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.roles}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
          <mat-header-cell  *matHeaderCellDef > Actions </mat-header-cell>
          <mat-cell *matCellDef="let user" >
            <button (click)="demoteOrgToUser(user.id)">Demote to User</button>
            <button (click)="deleteUser(user.id)">Delete</button>
          </mat-cell>
        </ng-container>
      </table>
      <mat-paginator
          #paginatorOrg="matPaginator"
          [pageSizeOptions]="[5,10,20]"
          showFirstLastButtons
          aria-label="Select page">
      </mat-paginator>
  </mat-expansion-panel>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        User
      </mat-panel-title>
      <mat-panel-description>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyUserFilter($event)" placeholder="Ex. Mia" #input>
    </mat-form-field>

      <table mat-table [dataSource]="DataSourceUsr" class="mat-elevation-z8">

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>

        <ng-container matColumnDef="username">
          <mat-header-cell *matHeaderCellDef> Username </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.username}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="email">
          <mat-header-cell mat-header-cell *matHeaderCellDef> E-Mail </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.email}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="roles">
          <mat-header-cell mat-header-cell *matHeaderCellDef> Roles </mat-header-cell>
          <mat-cell mat-cell *matCellDef="let element"> {{element.roles}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
          <mat-header-cell  *matHeaderCellDef > Actions </mat-header-cell>
          <mat-cell *matCellDef="let user" >
            <button *ngIf="isAdmin" (click)="promoteUserToModerator(user.id)">Promote to Moderator</button>
            <button (click)="promoteUserToOrganizer(user.id)">Promote to Organizer</button>
            <button (click)="deleteUser(user.id)">Delete</button>
          </mat-cell>
        </ng-container>
      </table>
      <mat-paginator
          #paginatorUsr="matPaginator"
          [pageSizeOptions]="[5,10,20]"
          showFirstLastButtons
          aria-label="Select page">
      </mat-paginator>
  </mat-expansion-panel>


</mat-accordion>

<div *ngIf="isAdmin === false">
  Admin role required
</div>
